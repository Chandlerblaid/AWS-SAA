# VPC

## VPCs:
	- Virtual Private Cloud
	- Allowed 5 VPCs in each AWS Region by default.
	- Can attach only one internet gateway to a custom VPC.

## NAT instances:
	- Disable src/dst check on instance
	- Must be in a public subnet
	- Must be a route out of the private subnet to the NAT instance.
	- The amount of traffic that the NAT instance can support depends on the instance size.
	- You can create high availability with auto scaling groups, multiple subnets in different Azs, and a script to automate failover.
	- Behind a SG

## NAT Gateways:
	- Preferred by the enterprise
	- Scale automatically up to 10gbps
	- No need to patch
	- Not associated with SGs
	- Automatically assigned a public IP address
	- Remember to update your route tables
	- No need to disable src/dst checks
	- More secure than NAT instances

## Network ACLs:
	- VPC automatically comes with a default network ACL, and by default it allows all outbound and inbound traffic
	- You can create custom network ACLs. By default, each custom network ACL denies all inbound and outbound traffic until you add rules.
	- Each subnet in your VPC must be associated with a network ACL. If you don’t explicitly associate w/ a network ACL, the subnet is automatically associated with the default network ACL.
	- You can associate a network ACL with multiple subnets; however, a subnet can be associated with only one network ACL at a time. When you associate a network AC with a subnet, the previous association is removed.
	- Network ACLs contain a numbered list of rules that is evaluated in order, starting with the lowest numbered rule.
	- Network ACLs have separated inbound and outbound rules, and each rule can either allow or deny traffic.
	- Network ACLs are stateless; responses to allowed inbound traffic are subject to the rules for outbound traffic (and vice versa).
	- User can block IP addresses using network ACLs not SGs
		○ You cannot block IP addresses using SGs

## ALBs:
	- You will need at least 2 public subnets to deploy an ALB

## VPC Flow Logs:
	- Logs that enable monitor traffic across all of our elastic network interfaces.
	- You cannot enable flow logs for VPCs that are peered w/ you VPC unless the peer VPC is in your account
	- You cannot tag a flow log
	- After you’ve created a flow log, you cannot change its configuration; you cant associate a different IAM role w/ the flow log.
	- Not all IP traffic is monitored;
		○ Traffic generated by instances when they contact the Amazon DNS server. If you use your own DNS server, then all traffic to that DNS server is logged.
		○ Traffic generated by a Windows instance for Amazon Windows license activation.
		○ Traffic to and from 169.254.169.254 for instance metadata.
		○ DHCP traffic
		○ Traffic to the reserved IP addresses for the default VPC router.

## VPC EndPoints:
	- Can be gateways of interfaces within a private subnet.
	- Gateways are more resilient and durable.

